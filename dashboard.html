<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300;1,500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="dash.css">

</head>

<body class="bg-light">
    <!--left side bar-->


    <div class="con-fluid text-secondary">
        <div class="inCol side-nav bg-dark text-white">
            <h2 class=" pt-4 pb-4 ml-3">BLOG</h2>
            <!-- <h6 class=" p-2 mb-3 text-cente">Dashboard</h6> -->
            <div class="row pl-1">
                <div class="col-sm-2 mo">
                    <i class="fa fa-user ml-3"></i>
                </div>
                <div class="col-sm-9">
                    <small class="mt-1 mr-3 font-weight-400">User Admin</small>
                </div>
            </div>
            <div class="navbar-nav">
                <a style="border-top: 1px solid #6C757D ;" class="nav-item nav-link active pl-3 mt-4">Post</a>
                <a class="nav-item nav-link pl-3" href="">Edit Post</a>
            </div>
            <div class="down d-flex pt-2">
                <p class="mt-2">Help</p>
                <div class="bt">
                    <button class="btn btn-secondary">Log Out</button>
                </div>


            </div>

        </div>
        <div class="m-page bg-light ">
            <nav class="bg-white pl-3">
                <span class="mr-4  h5">Dashboard</span>

            </nav>

            <!-- content -->
            <main class="pl-3 pt-4 pr-3">
                <p class="h4">Add New Post</p>
                <div class="card border dow">
                    <div class="row roo">
                        <p class="col-sm-2 pl-4 pt-2 font-weight-bold ">Post</p>
                    </div>
                    <hr style="margin-top: -9px; background-color: #6C757D;">
                    <form class="form-group pl-3 pr-3" action="">
                        <input id="tit" class="form-control mb-3" type="text" placeholder="Title">
                        <textarea id="abt" class="form-control mb-3" type="text" placeholder="About"></textarea>
                        <input id="fil" class="form-control mb-3" type="file" placeholder="">
                        <input type="button" id="btn" class="btn btn-primary" value="Add Post">
                    </form>
                </div>

                <div id="res" class="pl-3 pt-4 pr-3">
                    <div id="u">
                        <p class="h4">Posts</p>
                        <div id="unsaved"></div>
                        <div id="res">
                            <input id="0" type="button" class="btn btn-success mt-2 save" value="Save">
                        </div>
                    </div>

            </main>



        </div>
    </div>
</body>

<script>
    (function ($) {

        let addPost = []
        let localPost = []
        let addObj;
        let j = 0
        let a = 0
        let iclick = 0

        let add = () => {

            let title = $('#tit').val()
            let about = $('#abt').val()
            addObj = {
                id: j,
                postTitle: title,
                postAbout: about
            }
            addPost.push(addObj)
            console.log(title, about);
            j++
        }
        let dry = (e) => {
            f = e.target.id
            g = addPost.splice(f, 1)
            addPost = addPost
            unsaved.innerHTML = ''
            for (let i = 0; i < addPost.length; i++) {
                unsaved.innerHTML += ` 
                         <div class="card border mb-3 do">
                        <div class="row roo">
                            <p class="col-sm-10 pl-4 pt-2 font-weight-bold ">Post</p>
                            <i id="${i}" class="col-sm-2 fo font-weight-bold text-right pr-4 erase">&times</i>
                        </div>
                        <hr style="margin-top: -9px; background-color: #6C757D;">
                        <div class="form-group pl-3 pr-3" action="">
                            <p id="tit1" class="yo mb-3 h4" type="text" placeholder="Title">${addPost[i].postTitle}</p>
                            <p id="abt1" class=" mb-3" type="text" placeholder="About">${addPost[i].postAbout}</p>
                            <p id="fil1" class=" mb-3" placeholder=""></p>
                            <input type="button" id="${i}" class="btn1 btn btn-primary" value="Edit">    
                            <input type="button" id="${i}" class="btn2 btn btn-primary" value="Save">    
                        </div>
                    </div>`

            }
        }

        let mainDel = (cl) => {
            let btn = document.querySelectorAll(`.${cl}`)
            btn.forEach(ele => {
            })
        }
        let opt = (e) => {
            editT = e.target.parentElement.children
            editA = e.target.parentElement.children
            a = editT[0].innerHTML
            b = editA[1].innerHTML
        }


        let close = (e) => {
            if (e.target.classList.contains('btn') && $('#tit').val() !== '' && $('#abt').val() !== '') {
                add()
                unsaved.innerHTML = ""
                for (let i = 0; i < addPost.length; i++) {
                    unsaved.innerHTML += `  
                    <div id="${i}" class="card border mb-3 do">
                        <div class="row roo">
                            <p class="col-sm-10 pl-4 pt-2 font-weight-bold ">Post</p>
                            <i id="${i}" class="col-sm-2 fo font-weight-bold text-right pr-4 erase">&times</i>
                        </div>
                        <hr style="margin-top: -9px; background-color: #6C757D;">
                        <div class="form-group pl-3 pr-3" action="">
                            <p id="tit1" class="yo mb-3 h4" type="text" placeholder="Title">${addPost[i].postTitle}</p>
                            <p id="abt1" class=" mb-3" type="text" placeholder="About">${addPost[i].postAbout}</p>
                            <p id="fil1" class=" mb-3" placeholder=""></p>
                            <input type="button" id="${i}" class="btn1 btn btn-primary" value="Edit">    
                              
                        </div>
                       
                    </div>
                   
                    </div>`
                    console.log(addPost);


                };
                $('#tit').val('')
                $('#abt').val('')
                $('#fil').val('')



            }
            else if (e.target.classList.contains('erase')) {
                mainDel('erase')
                dry(e)
                console.log(addPost);

            }
            else if (e.target.classList.contains('btn1')) {
                console.log('Hi')
                mainDel('btn1')
                opt(e)
                $('#tit').val(a)
                $('#abt').val(b)
                dry(e)
                e.target.parentElement.parentElement.remove()


            }
            else if (e.target.classList.contains('save')) {
                editT = e.target.parentElement.parentElement.children
                editA = e.target.parentElement.parentElement.children
                a = editT[0].innerHTML
                b = editA[1].innerHTML
                par = e.target.parentElement.previousElementSibling.children
                console.log(par);
                for (let i = 0; i< par.length; i++) {
                    par[i].classList.add('bg-light')
                }
                console.log(addPost) 
                localStorage.setItem('addPost', JSON.stringify(addPost))

            }

        }
        // let save = () => {
        //     opt(e)
        //     console.log(addPost);
        //     par = e.target.parentElement.parentElement.class
        //     console.log(par)
        //     $(`#${par}`).addClass('bg-light')
        //     // localStorage.setItem('addPost', JSON.stringify(addPost))
        // }






        $('body').on('click', (e) => { close(e) })
        // $('#save').on('click', () => { save() })












    })(jQuery)
</script>

</html>